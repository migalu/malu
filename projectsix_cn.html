<!DOCTYPE html>

<html lang="zh-CN" class="no-js"> 
<head>

	<!-- Basic Page Needs
  ================================================== -->
	<meta charset="utf-8">
	<title>Visual Swarm</title>
	<meta name="description" content="Ma Yujia">
		<link rel="image_src" href="images/new_logo.png">
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="Bookmark" href="images/favicon.ico">
	<!-- Mobile Specific Metas
  ================================================== -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta http-equiv="Page-Enter" content="blendTrans(Duration=0.5)" /> 
    <meta http-equiv="Page-Exit" content="blendTrans(Duration=0.5)" />

	<!-- CSS
  ================================================== -->
	<link rel="stylesheet" type="text/css" href="css/component.css" />
	<link rel="stylesheet" type="text/css" href="css/default-work-cn.css" />

	<link href='http://fonts.googleapis.com/css?family=Noto+Sans|Anaheim|Sanchez|Julius+Sans+One|Open+Sans' rel='stylesheet' type='text/css'>

	<script src="processing-1.4.1.min.js"></script>

	<style>  

   		a:link {text-decoration:none; color: white}     
		a:hover {text-decoration:uderliner;color: white} 
		a:visited {text-decoration:uderliner;color: white}  
	</style> 
	    <script src="jss/modernizr.custom.js"></script>
	    <script src="js/processing-1.4.1.min.js"></script>
	    <script type="text/processing" data-processing-target="processing-canvas">
import traer.physics.*;
Particle mouse;            // particle on mouse position
Particle[] particles;      // the moving particle
Particle[] orgParticles;   // original particles - fixed
Spring [] mySprings;
ParticleSystem myParticleSystem;    // the particle system

// initial parameters
//int xCount = 50;
//int yCount = 30;
//int totalNodes = xCount * yCount;
//float gridSizeX, gridSizeY, gapX, gapY, border;
int radio = 4; // point size

int maxPoints = 10000;
PVector[] points = new PVector[maxPoints];
float rotX, rotY = 0.0;

void setup() { //---------------------------------------------------------------------------
  size(650, 650,P3D);
  smooth();
 

  /*gridSizeX = width -2*border;
  gridSizeY = height-2*border;
  gapX = gridSizeX / (xCount-1);
  gapY = gridSizeY / (yCount-1);*/

  myParticleSystem = new ParticleSystem(0, 0.05);
  mouse = myParticleSystem.makeParticle();            // create a particle for the mouse
  mouse.makeFixed();                         // don't let forces move it
  particles    = new Particle[maxPoints]; // particle array
  orgParticles = new Particle[maxPoints]; // fixed particle array
  mySprings = new Spring [maxPoints]; // spring array
  
  //int a;

 //for (int y=0; y<yCount; y++) {        // go through all columns
    //for (int x=0; x<xCount; x++) {           // go through all rows
      //a = y*xCount+x; // 2D to 1D transformation
      for (int ni=0; ni<maxPoints; ni++){
      points[ni] = randomSpherePoint(200);
      
      float xPos = points[ni].x;
      float yPos = points[ni].y;
      float zPos = points[ni].z;
      
      particles[ni]    = myParticleSystem.makeParticle(0.8, xPos, yPos, zPos);
      orgParticles[ni] = myParticleSystem.makeParticle(0.8, xPos, yPos, zPos);
      orgParticles[ni].makeFixed();
      // making springs between both arrays
      mySprings[ni]= myParticleSystem.makeSpring(particles[ni], orgParticles[ni], 0.2, 0.1, 0 );
      // make interaction between mouse and particles
      //myParticleSystem.makeAttraction(particles[a], mouse, -10000, 0.1);
      myParticleSystem.makeAttraction(particles[ni], mouse, 80000, 100); // 50000, 100
    }
    }

 // end setup

void draw() { 
  background(250);
  noStroke();
   
  translate(width/2, height/2);
   rotateX (rotX);
   rotateY (rotY); 
   
  //println("framerate: " + frameRate); //if you want to tracking efficiency
  mouse.position().set(mouseX-width/2, mouseY-height/2, 0 ); // tracking mouse
  myParticleSystem.tick(); 
  
   
  
  //int a;
  float posx, posy,posz;
  
  for (int ni=0; ni<maxPoints; ni++){
    point (points[ni].x, points[ni].y, points[ni].z);// 1D to 2D
    
      /*posx = particles[ni].position().x();
      posy = particles[ni].position().y();
      posz = particles[ni].position().y();
      
      //float w = map(dist(posx, posy, mouseX, mouseY), 0, sqrt(width*width + height*height), 200, 50);
      fill(#689DBC); 
      //fill(w);   
      noStroke();
      translate (posx, posy, posz);
      sphere(radio);*/
      
     if (mousePressed){
     rotY += (pmouseX - mouseX) * -0.000001;
     rotX += (pmouseY - mouseY) * +0.000001;
  }
  rotY += 0.000001;
}
  
  // drawing springs
  for (int n =0; n < mySprings.length; n++){
   float x1 = mySprings[n].getOneEnd().position().x();
   float y1 = mySprings[n].getOneEnd().position().y();
   float z1 = mySprings[n].getOneEnd().position().z();
   float x2 = mySprings[n].getTheOtherEnd().position().x();
   float y2 = mySprings[n].getTheOtherEnd().position().y();
   float z2 = mySprings[n].getOneEnd().position().z();
   stroke(#342502,200);
   line (x2,y2,z2,x1,y1,z1);
  }
} 
// end draw
PVector randomSpherePoint(float radius)
{
  float a=0, b=0, c=0, d=0, k=99;
  while (k >= 1.0)
  {
    a = random (-1.0, 1.0);
    b = random (-1.0, 1.0);
    c = random (-1.0, 1.0);
    d = random (-1.0, 1.0);
    k = a*a +b*b +c*c +d*d;
    //print('.');
  }
  //println ("s");
  k = k/radius;
  return new PVector
    ( 2*(b*d + a*c) / k
    , 2*(c*d - a*b) / k 
    , (a*a + d*d - b*b - c*c) / k);
}
</script>
	    

</head>

<body>
		
<div id="header">
	<div class="container">
		
		<span class="fakecontajner"><span class="fakelogo"><a href="home.html"><img src="images/home-frame.png" width="200px"alt="logo" /></a></span>
	<!-- </span><span class="hover home-choose" style="left: 290.5px; width: 56px; height: 5px; overflow: hidden;"></span> -->
	<div id="nav" class="span-10" style="width: 739px;">		  
		<ul class="links main-menu">
			<li>
				<a href="about_cn.html" >关于我</a>
			</li>
			<li class="tt-choose">
				<span>作品</span>
			</li>
			<li  >
				<a href="home_cn.html">主页</a>
			</li>
			<li>
				<a href="doodle_cn.html">随手画画</a>
			</li>
			<li >
				<a href="contact_cn.html">联系我</a>
			</li>
		</ul>
		<div class="lan"><a href="index.html" style="font-size:12px;color:#6cbabd;">CN</a></div>		
    </div>
    </div>
</div>


	<div id="content" class="container frame pro-six">
		<div class="padder">
			<div id="title" class="intro">
				<div class="left">
				<h1>Visual Swarm</h1>
				<h2>第二学期, 小组项目</h2>
				</div>
				<div class="right">
					<ul class="clearfix">
							<li class="first">
								<a href="projectfive_cn.html"><img src="images/left.png"   width="30px;"></a>
								<a href="projectfive_cn.html"><img src="images/left2.png"  width="30px;" class="pre"></a>
								<a href="projectseven_cn.html"><img src="images/right.png"   width="30px;"></a>
								<a href="projectseven_cn.html"><img src="images/right2.png"  width="30px;" class="doodle"></a>
								<a href="work_cn.html"><img src="images/menu.png"   width="30px;"></a>
								<a href="work_cn.html"><img src="images/menu2.png"  width="30px;" class="menu"></a>
							</li>
					</ul>	
				</div>	
            </div>


        
		<div id="description">
		<h3>项目介绍</h3>
		<h4>3D基础设计，利用processing编程，使用Kinect识别手势，制作多点触摸屏。</h4>
		</div>	
		<div id="detail">
		<h3>屏幕截图</h3>
		<h5>最初我们模拟了动物的毛发，触摸时发生变形 </h5>
		<canvas id="processing-canvas"> </canvas>
		<div class="img-text maofa">
			<img src="images/maofa3.png" alt="visuel swarm" width="150px;">
		    <img src="images/maofa4.png" alt="visuel swarm" width="150px;">
		    <img src="images/maofa1.png" alt="visuel swarm" width="150px;">
		    <img src="images/maofa2.png" alt="visuel swarm" width="150px;">
		    <h5>最终效果 </h5>
		    <img src="images/vs1.png" alt="visuel swarm" width="320px;">
		    <img src="images/vs2.png" alt="visuel swarm" width="320px;">			
		</div>
		</div>

		<!-- <canvas data-processing-sources="ball.pde"></canvas> -->


		<div id="detail">
		<h3>视频</h3>
		<div class="video">
			<embed src="http://player.youku.com/player.php/sid/XNjMzMjE1OTQ4/v.swf" allowFullScreen="true" quality="high" width="645" height="430" align="middle" allowScriptAccess="always" type="application/x-shockwave-flash"></embed>
		</div>	
		</div>
		

		<div id="title" class="intro">
				<div class="right">
					<ul class="clearfix">
							<li class="first">
								<a href="projectfive_cn.html"><img src="images/left.png"   width="30px;"></a>
								<a href="projectfive_cn.html"><img src="images/left2.png"  width="30px;" class="pre"></a>
								<a href="projectseven_cn.html"><img src="images/right.png"   width="30px;"></a>
								<a href="projectseven_cn.html"><img src="images/right2.png"  width="30px;" class="doodle"></a>
								<a href="work_cn.html"><img src="images/menu.png"   width="30px;"></a>
								<a href="work_cn.html"><img src="images/menu2.png"  width="30px;" class="menu"></a>
							</li>
					</ul>	
				</div>	
            </div>
	    </div> <!-- end contents -->
	</div>
</body>


</html>
	